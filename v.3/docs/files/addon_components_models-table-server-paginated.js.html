<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>addon/components/models-table-server-paginated.js - ember-models-table</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="ember-models-table" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 3.0.1.91d25ad1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/Components.Bs4ModelsTableColumnsDropdown.html">Components.Bs4ModelsTableColumnsDropdown</a></li>
                                <li><a href="../classes/Components.Bs4ModelsTableDataGroupBySelect.html">Components.Bs4ModelsTableDataGroupBySelect</a></li>
                                <li><a href="../classes/Components.Bs4ModelsTableGlobalFilter.html">Components.Bs4ModelsTableGlobalFilter</a></li>
                                <li><a href="../classes/Components.Bs4ModelsTableRowFilteringCell.html">Components.Bs4ModelsTableRowFilteringCell</a></li>
                                <li><a href="../classes/Components.Ebs3ModelsTableColumnsDropdown.html">Components.Ebs3ModelsTableColumnsDropdown</a></li>
                                <li><a href="../classes/Components.Ebs3ModelsTableDataGroupBySelect.html">Components.Ebs3ModelsTableDataGroupBySelect</a></li>
                                <li><a href="../classes/Components.Ebs3ModelsTableGlobalFilter.html">Components.Ebs3ModelsTableGlobalFilter</a></li>
                                <li><a href="../classes/Components.Ebs3ModelsTableRowFilteringCell.html">Components.Ebs3ModelsTableRowFilteringCell</a></li>
                                <li><a href="../classes/Components.Ebs3ModelsTableSummary.html">Components.Ebs3ModelsTableSummary</a></li>
                                <li><a href="../classes/Components.Ebs4ModelsTableColumnsDropdown.html">Components.Ebs4ModelsTableColumnsDropdown</a></li>
                                <li><a href="../classes/Components.Ebs4ModelsTableDataGroupBySelect.html">Components.Ebs4ModelsTableDataGroupBySelect</a></li>
                                <li><a href="../classes/Components.Ebs4ModelsTableGlobalFilter.html">Components.Ebs4ModelsTableGlobalFilter</a></li>
                                <li><a href="../classes/Components.Ebs4ModelsTableRowFilteringCell.html">Components.Ebs4ModelsTableRowFilteringCell</a></li>
                                <li><a href="../classes/Components.Ebs4ModelsTableSummary.html">Components.Ebs4ModelsTableSummary</a></li>
                                <li><a href="../classes/Components.EpModelsTableCellContentEdit.html">Components.EpModelsTableCellContentEdit</a></li>
                                <li><a href="../classes/Components.EpModelsTableColumnsDropdown.html">Components.EpModelsTableColumnsDropdown</a></li>
                                <li><a href="../classes/Components.EpModelsTableDataGroupBySelect.html">Components.EpModelsTableDataGroupBySelect</a></li>
                                <li><a href="../classes/Components.EpModelsTableExpandAllToggle.html">Components.EpModelsTableExpandAllToggle</a></li>
                                <li><a href="../classes/Components.EpModelsTableExpandToggle.html">Components.EpModelsTableExpandToggle</a></li>
                                <li><a href="../classes/Components.EpModelsTableGlobalFilter.html">Components.EpModelsTableGlobalFilter</a></li>
                                <li><a href="../classes/Components.EpModelsTablePageSizeSelect.html">Components.EpModelsTablePageSizeSelect</a></li>
                                <li><a href="../classes/Components.EpModelsTablePaginationNumeric.html">Components.EpModelsTablePaginationNumeric</a></li>
                                <li><a href="../classes/Components.EpModelsTablePaginationSimple.html">Components.EpModelsTablePaginationSimple</a></li>
                                <li><a href="../classes/Components.EpModelsTableRowFilteringCell.html">Components.EpModelsTableRowFilteringCell</a></li>
                                <li><a href="../classes/Components.EpModelsTableRowSelectAllCheckbox.html">Components.EpModelsTableRowSelectAllCheckbox</a></li>
                                <li><a href="../classes/Components.EpModelsTableRowSelectCheckbox.html">Components.EpModelsTableRowSelectCheckbox</a></li>
                                <li><a href="../classes/Components.EpModelsTableRowSortingCell.html">Components.EpModelsTableRowSortingCell</a></li>
                                <li><a href="../classes/Components.EpModelsTableSelect.html">Components.EpModelsTableSelect</a></li>
                                <li><a href="../classes/Components.EpModelsTableSummary.html">Components.EpModelsTableSummary</a></li>
                                <li><a href="../classes/Components.ModelsTable.html">Components.ModelsTable</a></li>
                                <li><a href="../classes/Components.ModelsTableCell.html">Components.ModelsTableCell</a></li>
                                <li><a href="../classes/Components.ModelsTableCellColumnSummary.html">Components.ModelsTableCellColumnSummary</a></li>
                                <li><a href="../classes/Components.ModelsTableCellContentDisplay.html">Components.ModelsTableCellContentDisplay</a></li>
                                <li><a href="../classes/Components.ModelsTableCellContentEdit.html">Components.ModelsTableCellContentEdit</a></li>
                                <li><a href="../classes/Components.ModelsTableCellEditToggle.html">Components.ModelsTableCellEditToggle</a></li>
                                <li><a href="../classes/Components.ModelsTableColumnsDropdown.html">Components.ModelsTableColumnsDropdown</a></li>
                                <li><a href="../classes/Components.ModelsTableColumnsHidden.html">Components.ModelsTableColumnsHidden</a></li>
                                <li><a href="../classes/Components.ModelsTableDataGroupBySelect.html">Components.ModelsTableDataGroupBySelect</a></li>
                                <li><a href="../classes/Components.ModelsTableExpandAllToggle.html">Components.ModelsTableExpandAllToggle</a></li>
                                <li><a href="../classes/Components.ModelsTableExpandToggle.html">Components.ModelsTableExpandToggle</a></li>
                                <li><a href="../classes/Components.ModelsTableFooter.html">Components.ModelsTableFooter</a></li>
                                <li><a href="../classes/Components.ModelsTableGlobalFilter.html">Components.ModelsTableGlobalFilter</a></li>
                                <li><a href="../classes/Components.ModelsTableGroupedHeader.html">Components.ModelsTableGroupedHeader</a></li>
                                <li><a href="../classes/Components.ModelsTableGroupSummaryRow.html">Components.ModelsTableGroupSummaryRow</a></li>
                                <li><a href="../classes/Components.ModelsTableNoData.html">Components.ModelsTableNoData</a></li>
                                <li><a href="../classes/Components.ModelsTablePageSizeSelect.html">Components.ModelsTablePageSizeSelect</a></li>
                                <li><a href="../classes/Components.ModelsTablePaginationNumeric.html">Components.ModelsTablePaginationNumeric</a></li>
                                <li><a href="../classes/Components.ModelsTablePaginationSimple.html">Components.ModelsTablePaginationSimple</a></li>
                                <li><a href="../classes/Components.ModelsTableRow.html">Components.ModelsTableRow</a></li>
                                <li><a href="../classes/Components.ModelsTableRowExpand.html">Components.ModelsTableRowExpand</a></li>
                                <li><a href="../classes/Components.ModelsTableRowFiltering.html">Components.ModelsTableRowFiltering</a></li>
                                <li><a href="../classes/Components.ModelsTableRowFilteringCell.html">Components.ModelsTableRowFilteringCell</a></li>
                                <li><a href="../classes/Components.ModelsTableRowGrouping.html">Components.ModelsTableRowGrouping</a></li>
                                <li><a href="../classes/Components.ModelsTableRowGroupToggle.html">Components.ModelsTableRowGroupToggle</a></li>
                                <li><a href="../classes/Components.ModelsTableRowSelectAllCheckbox.html">Components.ModelsTableRowSelectAllCheckbox</a></li>
                                <li><a href="../classes/Components.ModelsTableRowSelectCheckbox.html">Components.ModelsTableRowSelectCheckbox</a></li>
                                <li><a href="../classes/Components.ModelsTableRowSorting.html">Components.ModelsTableRowSorting</a></li>
                                <li><a href="../classes/Components.ModelsTableRowSortingCell.html">Components.ModelsTableRowSortingCell</a></li>
                                <li><a href="../classes/Components.ModelsTableSelect.html">Components.ModelsTableSelect</a></li>
                                <li><a href="../classes/Components.ModelsTableServerPaginated.html">Components.ModelsTableServerPaginated</a></li>
                                <li><a href="../classes/Components.ModelsTableSummary.html">Components.ModelsTableSummary</a></li>
                                <li><a href="../classes/Components.ModelsTableTable.html">Components.ModelsTableTable</a></li>
                                <li><a href="../classes/Components.ModelsTableTableBody.html">Components.ModelsTableTableBody</a></li>
                                <li><a href="../classes/Components.ModelsTableTableFooter.html">Components.ModelsTableTableFooter</a></li>
                                <li><a href="../classes/Components.ModelsTableTableHeader.html">Components.ModelsTableTableHeader</a></li>
                                <li><a href="../classes/Components.PlainHtmlModelsTableColumnsDropdown.html">Components.PlainHtmlModelsTableColumnsDropdown</a></li>
                                <li><a href="../classes/Components.PlainHtmlModelsTableGlobalFilter.html">Components.PlainHtmlModelsTableGlobalFilter</a></li>
                                <li><a href="../classes/Components.PlainHtmlModelsTableRowFilteringCell.html">Components.PlainHtmlModelsTableRowFilteringCell</a></li>
                                <li><a href="../classes/Components.PlainHtmlModelsTableSummary.html">Components.PlainHtmlModelsTableSummary</a></li>
                                <li><a href="../classes/Internal.ColumnDropdownOptions.html">Internal.ColumnDropdownOptions</a></li>
                                <li><a href="../classes/Internal.ColumnSet.html">Internal.ColumnSet</a></li>
                                <li><a href="../classes/Internal.GroupedHeader.html">Internal.GroupedHeader</a></li>
                                <li><a href="../classes/Internal.SelectOption.html">Internal.SelectOption</a></li>
                                <li><a href="../classes/Internal.SortMap.html">Internal.SortMap</a></li>
                                <li><a href="../classes/Themes.Bootstrap3Theme.html">Themes.Bootstrap3Theme</a></li>
                                <li><a href="../classes/Themes.Bootstrap4Theme.html">Themes.Bootstrap4Theme</a></li>
                                <li><a href="../classes/Themes.DefaultTheme.html">Themes.DefaultTheme</a></li>
                                <li><a href="../classes/Themes.EmberBootstrap3Theme.html">Themes.EmberBootstrap3Theme</a></li>
                                <li><a href="../classes/Themes.EmberBootstrap4Theme.html">Themes.EmberBootstrap4Theme</a></li>
                                <li><a href="../classes/Themes.EmberPaperTheme.html">Themes.EmberPaperTheme</a></li>
                                <li><a href="../classes/Themes.PlainHtmlTheme.html">Themes.PlainHtmlTheme</a></li>
                                <li><a href="../classes/Utils.ModelsTableColumn.html">Utils.ModelsTableColumn</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: addon/components/models-table-server-paginated.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
import {layout as templateLayout} from &#x27;@ember-decorators/component&#x27;;
import {action, computed, setProperties, set, get} from &#x27;@ember/object&#x27;;
import {alias} from &#x27;@ember/object/computed&#x27;;
import {isBlank, isNone} from &#x27;@ember/utils&#x27;;
import {run} from &#x27;@ember/runloop&#x27;;
import {warn} from &#x27;@ember/debug&#x27;;
import ModelsTable from &#x27;./models-table&#x27;;
import layout from &#x27;../templates/components/models-table&#x27;;

/**
 * Table-component with pagination, sorting and filtering.
 *
 * It should be used when pagination, filtering and sorting are done on the server-side. Otherwise [models-table](Components.ModelsTable.html) should be used.
 *
 * This component extends the base models-table component. For the end user, it can be used (nearly) the same:
 *
 * &#x60;&#x60;&#x60;hbs
 * &lt;ModelsTableServerPaginated @data={{data}} @columns={{columns}} /&gt;
 * &#x60;&#x60;&#x60;
 *
 * Usage with block context:
 *
 * &#x60;&#x60;&#x60;hbs
 * &lt;ModelsTableServerPaginated @data={{data}} @columns={{columns}} as |MT|&gt;
 *   &lt;MT.GlobalFilter /&gt;
 *   &lt;MT.DataGroupBySelect /&gt;
 *   &lt;MT.ColumnsDropdown /&gt;
 *   &lt;MT.Table /&gt;
 *   &lt;MT.Footer /&gt;
 * &lt;/ModelsTable&gt;
 * &#x60;&#x60;&#x60;
 *
 * ModelsTableServerPaginated yields same components, actions and properties as a ModelsTable does. Check its docs for more info.
 *
 * Check own docs for each component to get detailed info.
 *
 * ModelsTableServerPaginated has a lot of options you may configure, but there are two required properties called &#x60;data&#x60; and &#x60;columns&#x60;. First one contains data-query:
 *
 * &#x60;&#x60;&#x60;js
 * model() {
 *  return this.store.query(&#x27;my-model&#x27;, {});
 * }
 * &#x60;&#x60;&#x60;
 *
 * It will then take this query and extend it with pagination, sorting and filtering information. All other query parameters added in will remain untouched. Everything else works exactly the same - global filters, column filters etc. still use the same properties to control them. A few things to notice:
 *
 * - When using &#x60;filterWithSelect&#x60; for a column, you must use &#x60;predefinedFilterOptions&#x60;, because the automatic loading of possible filter values cannot work here.
 * - There is a new optional field &#x60;filteredBy&#x60; for columns, which works much like &#x60;sortedBy&#x60;: if set, this field will be used as query parameter, otherwise it will use the &#x60;propertyName&#x60;.
 * - Sorting will not use multipleColumnSorting, it will only sort by one column.
 * - If you set &#x60;sortedBy: false&#x60; on a column, sorting will be disabled for this column.
 *
 * There are a couple of things which can be configured to adapt to your API:
 *
 * &#x60;&#x60;&#x60;js
 * // The property on meta to load the pages count from.
 * metaPagesCountProperty: &#x27;pagesCount&#x27;,
 *
 * // The property on meta to load the total item count from.
 * metaItemsCountProperty: &#x27;itemsCount&#x27;,
 *
 * // The time to wait until new data is actually loaded.
 * // This can be tweaked to avoid making too many server requests.
 * debounceDataLoadTime: 500,
 *
 * // The query parameters to use for server side filtering / querying.
 * filterQueryParameters: {
 *   globalFilter: &#x27;search&#x27;,
 *   sort: &#x27;sort&#x27;,
 *   sortDirection: &#x27;sortDirection&#x27;,
 *   page: &#x27;page&#x27;,
 *   pageSize: &#x27;pageSize&#x27;
 * },
 * &#x60;&#x60;&#x60;
 *
 * This default configuration would try to get the total page count from &#x60;model.get(&#x27;meta.pagesCount&#x27;)&#x60; and the total item count from &#x60;model.get(&#x27;meta.itemsCount&#x27;)&#x60;, and would then go on to build the following query:
 *
 * &#x60;&#x60;&#x60;js
 * columns: [
 *   {
 *     propertyName: &#x27;name&#x27;,
 *     filteredBy: &#x27;model_name&#x27;
 *   }
 * ]
 *
 * // after searching globally for &quot;searchtexthere&quot;
 * // and in the name column for &quot;filterforname&quot;,
 * // and going to page 2,
 * // the following query would be built:
 * ?page=2&amp;pageSize=50&amp;search=searchtexthere&amp;sort=name&amp;sortDirection=ASC&amp;model_name=filterforname
 * &#x60;&#x60;&#x60;
 *
 * @class ModelsTableServerPaginated
 * @namespace Components
 * @extends Components.ModelsTable
 */
export default
@templateLayout(layout)
class ModelsTableServerPaginated extends ModelsTable {

  /**
   * True if data is currently being loaded from the server.
   * Can be used in the template to e.g. display a loading spinner.
   *
   * @protected
   * @property isLoading
   * @type boolean
   * @default false
   */
  isLoading = false;

  /**
   * True if last data query promise has been rejected.
   * Can be used in the template to e.g. indicate stale data or to e.g. show error state.
   *
   * @protected
   * @property isError
   * @type boolean
   * @default false
   */
  isError = false;

  /**
   * The property on meta to load the pages count from.
   *
   * @property metaPagesCountProperty
   * @type string
   * @default &#x27;pagesCount&#x27;
   */
  metaPagesCountProperty = &#x27;pagesCount&#x27;;

  /**
   * The property on meta to load the total item count from.
   *
   * @property metaItemsCountProperty
   * @type string
   * @default &#x27;itemsCount&#x27;
   */
  metaItemsCountProperty = &#x27;itemsCount&#x27;;

  /**
   * The time to wait until new data is actually loaded.
   * This can be tweaked to avoid making too many server requests.
   *
   * @property debounceDataLoadTime
   * @type number
   * @default 500
   */
  debounceDataLoadTime = 500;

  /**
   * Determines if multi-columns sorting should be used
   *
   * @property multipleColumnsSorting
   * @type boolean
   * @default false
   */
  multipleColumnsSorting = false;

  /**
   * The query parameters to use for server side filtering / querying.
   *
   * @property filterQueryParameters
   * @type object
   */
  filterQueryParameters = {
    globalFilter: &#x27;search&#x27;,
    sort: &#x27;sort&#x27;,
    sortDirection: &#x27;sortDirection&#x27;,
    page: &#x27;page&#x27;,
    pageSize: &#x27;pageSize&#x27;
  };

  /**
   * @property observedProperties
   * @type string[]
   * @default [&#x27;currentPageNumber&#x27;, &#x27;sortProperties.[]&#x27;, &#x27;pageSize&#x27;, &#x27;filterString&#x27;, &#x27;processedColumns.@each.filterString&#x27;]
   * @protected
   */

  observedProperties = [&#x27;currentPageNumber&#x27;, &#x27;sortProperties.[]&#x27;, &#x27;pageSize&#x27;, &#x27;filterString&#x27;, &#x27;processedColumns.@each.filterString&#x27;];

  /**
   * This is set during didReceiveAttr and whenever the page/filters change.
   *
   * @property filteredContent
   * @default null
   * @protected
   * @type object[]
   */
  filteredContent = null;

  /**
   * For server side filtering, visibleContent is same as the filtered content
   *
   * @property visibleContent
   * @protected
   * @type object[]
   */
  @alias(&#x27;arrangedContent&#x27;) visibleContent;

  /**
   * For server side filtering, arrangedContent is same as the filtered content
   *
   * @property arrangedContent
   * @protected
   * @type object[]
   */
  @alias(&#x27;filteredContent&#x27;) arrangedContent;

  /**
   * The total content length is get from the meta information.
   * Set metaItemsCountProperty to change from which meta property this is loaded.
   *
   * @property arrangedContentLength
   * @type number
   * @protected
   */
  @computed(&#x27;filteredContent.meta&#x27;)
  get arrangedContentLength() {
    let meta = get(this, &#x27;filteredContent.meta&#x27;) || {};
    return get(meta, this.metaItemsCountProperty) || 0;
  }

  /**
   * The pages count is get from the meta information.
   * Set metaPagesCountProperty to change from which meta property this is loaded.
   *
   * @property pagesCount
   * @type number
   * @protected
   */
  @computed(&#x27;filteredContent.meta&#x27;)
  get pagesCount() {
    let meta = get(this, &#x27;filteredContent.meta&#x27;) || {};
    return get(meta, this.metaPagesCountProperty) || 1;
  }

  /**
   * The index of the last item that is currently being shown.
   *
   * @property lastIndex
   * @type number
   * @protected
   */
  @computed(&#x27;pageSize&#x27;, &#x27;currentPageNumber&#x27;, &#x27;arrangedContentLength&#x27;)
  get lastIndex() {
    let pageMax = parseInt(this.pageSize, 10) * this.currentPageNumber;
    return Math.min(pageMax, this.arrangedContentLength);
  }

  /**
   * This function actually loads the data from the server.
   * It takes the store, modelName and query from the passed in data-object and adds page, sorting &amp; filtering to it.
   *
   * @return Promise
   * @method _loadData
   * @private
   */
  _loadData() {
    const {data, currentPageNumber, pageSize, processedColumns: columns, sortProperties, filterString} = this;
    if (!get(data, &#x27;query&#x27;)) {
      warn(&#x27;You must use http://emberjs.com/api/data/classes/DS.Store.html#method_query for loading data&#x27;, false, {id: &#x27;#emt-query-usage&#x27;});
      return;
    }
    let query = Object.assign({}, get(data, &#x27;query&#x27;));
    let store = get(data, &#x27;store&#x27;);
    let modelName = get(data, &#x27;type.modelName&#x27;);

    // Add pagination information
    query[get(this, &#x27;filterQueryParameters.page&#x27;)] = currentPageNumber;
    query[get(this, &#x27;filterQueryParameters.pageSize&#x27;)] = pageSize;
    // Add sorting information
    if (sortProperties &amp;&amp; get(sortProperties, &#x27;length&#x27;)) {
      if (this.multipleColumnsSorting) {
        query = this.multipleColumnsSortingWrapper(query, sortProperties);
      }
      else {
        if (sortProperties[0]) {
          let [sortBy, sortDirection] = sortProperties[0].split(&#x27;:&#x27;);
          query = this.singleColumnSortingWrapper(query, sortBy, sortDirection.toUpperCase());
        }
      }
    } else {
      delete query[[get(this, &#x27;filterQueryParameters.sort&#x27;)]];
      delete query[[get(this, &#x27;filterQueryParameters.sortDirection&#x27;)]];
    }

    // Add global filter
    let globalFilter = get(this, &#x27;filterQueryParameters.globalFilter&#x27;);
    if (filterString) {
      query[globalFilter] = filterString;
    } else {
      delete query[globalFilter];
    }

    // Add per-column filter
    if (this.useFilteringByColumns) {
      columns.forEach(column =&gt; {
        let filter = get(column, &#x27;filterString&#x27;);
        let filterTitle = this.getCustomFilterTitle(column);
        this.setQueryFilter(query, column, filterTitle, filter);
      });
    }

    setProperties(this, {isLoading: true, isError: false});
    return this.doQuery(store, modelName, query)
      .then(() =&gt; setProperties(this, {isLoading: false, isError: false}))
      .catch(() =&gt; setProperties(this, {isLoading: false, isError: true}));
  }

  /**
   * Do query-request to load new data
   *
   * You may override this method to add some extra behavior or even additional requests
   *
   * @method doQuery
   * @param {object} store
   * @param {string} modelName
   * @param {object} query
   * @return Promise
   */
  doQuery(store, modelName, query) {
    return store.query(modelName, query).then(newData =&gt; set(this, &#x27;filteredContent&#x27;, newData));
  }

  /**
   * Actually set the filter on a query.
   * This can be overwritten for special case handling.
   * Note that this will mutate the given query object!
   *
   * @param {object} query the query to mutate
   * @param {object} column the column that is filtering
   * @param {string} filterTitle the query param name for filtering
   * @param {*} filter the actual filter value
   * @method setQueryFilter
   */
  setQueryFilter(query, column, filterTitle, filter) {
    if (!isBlank(filter)) {
      query[filterTitle] = filter;
    } else {
      delete query[filterTitle];
    }
  }

  /**
   * Wrapper for sorting query when single column sorting is used
   *
   * @param {object} query parameters
   * @param {string} sortBy
   * @param {string} sortDirection
   * @return object query parameters
   * @method singleColumnSortingWrapper
   */
  singleColumnSortingWrapper(query, sortBy, sortDirection) {
    query[get(this, &#x27;filterQueryParameters.sort&#x27;)] = sortBy;
    query[get(this, &#x27;filterQueryParameters.sortDirection&#x27;)] = sortDirection;

    return query;
  }

  /**
   * Wrapper for sorting query when multi columns sorting is used
   *
   * @param {object} query
   * @param {object} sortProperties
   * @return object query parameters
   * @method multipleColumnsSortingWrapper
   */
  multipleColumnsSortingWrapper(query, sortProperties) {
    query[get(this, &#x27;filterQueryParameters.sort&#x27;)] = sortProperties.map(sortProp =&gt; {
      const [prop, direction] = sortProp.split(&#x27;:&#x27;);
      const sign = direction.toLowerCase() === &#x27;desc&#x27; ? &#x27;-&#x27; : &#x27;&#x27;;
      return &#x60;${sign}${prop}&#x60;;
    }).join(&#x27;,&#x27;);

    return query;
  }

  /**
   * Customize filter title
   *
   * @method getCustomFilterTitle
   * @param {object} column
   * @return string title
   */
  getCustomFilterTitle(column) {
    return get(column, &#x27;filteredBy&#x27;) || get(column, &#x27;propertyName&#x27;);
  }

  /**
   * @protected
   * @event sort
   * @param {Utils.ModelsTableColumn} column
   */
  @action
  sort(column) {
    let sortedBy = get(column, &#x27;sortedBy&#x27;) || get(column, &#x27;propertyName&#x27;);
    if (isNone(sortedBy)) {
      return;
    }
    let currentSorting = get(column, &#x27;sorting&#x27;);
    let newSorting = this.sortMap[currentSorting.toLowerCase()];
    let sortingArgs = [column, sortedBy, newSorting];
    if (this.multipleColumnsSorting) {
      this._multiColumnsSorting(...sortingArgs);
    }
    else {
      this._singleColumnSorting(...sortingArgs);
    }
    this.userInteractionObserver();
  }

  didReceiveAttrs() {
    set(this, &#x27;filteredContent&#x27;, this.data);
  }

  _addPropertyObserver() {
    run.debounce(this, this._loadData, this.debounceDataLoadTime);
  }

  willInsertElement() {
    super.willInsertElement(...arguments);
    this.observedProperties.forEach(propertyName =&gt; this.addObserver(propertyName, this, &#x27;_addPropertyObserver&#x27;));
  }

  willDestroyElement() {
    super.willDestroyElement(...arguments);
    this.observedProperties.forEach(propertyName =&gt; this.removeObserver(propertyName, this, &#x27;_addPropertyObserver&#x27;));
  }
}

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
